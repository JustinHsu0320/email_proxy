# .docker/.env.dev.example

# ============================================
# Environment
# ============================================
APP_ENV=development

# ============================================
# PostgreSQL
# ============================================
POSTGRES_USER=smtp_user
POSTGRES_PASSWORD=your_secure_password
POSTGRES_DB=smtp_service

# ============================================
# RabbitMQ
# ============================================
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=your_secure_password

# ============================================
# KeyDB
# ============================================
KEYDB_STATUS_TTL_DAYS=14

# ============================================
# Microsoft OAuth 2.0 (組織網域郵件發送)
# ============================================
MICROSOFT_TENANT_ID=your-tenant-id
MICROSOFT_CLIENT_ID=your-client-id
MICROSOFT_CLIENT_SECRET=your-client-secret

# ============================================
# SendGrid (非組織網域郵件發送)
# ============================================
SENDGRID_API_KEY=your-sendgrid-api-key
ORG_EMAIL_DOMAIN=@ptc-nec.com.tw

# ============================================
# Attachment Volume (外接硬碟路徑)
# ============================================
ATTACHMENT_VOLUME_PATH=../data/attachments
MAX_ATTACHMENT_SIZE_MB=25

# ============================================
# Worker
# 最佳實踐：WORKER_PREFETCH >= WORKER_CONCURRENCY，這樣每個 goroutine 都能有訊息可處理，不會出現閒置的 goroutine。
# ============================================
WORKER_CONCURRENCY=10
WORKER_PREFETCH=10
MAX_RETRY_COUNT=5

# ============================================
# JWT
# ============================================
JWT_SECRET=your-jwt-secret-key-change-this-in-production

# ============================================
# Admin Token 初始化設定
# 啟動時自動建立 MIS Admin Token
# ============================================
INIT_ADMIN_TOKEN=true
ADMIN_TOKEN_NAME=MIS Admin

# ============================================
# SMTP Inbound Server 設定
# 接收外部 SMTP 郵件並轉發到 RabbitMQ
# ============================================
# SMTP 主要監聽埠號（不使用 25 以避免權限問題）
SMTP_INBOUND_PORT=2525
# SMTP TLS 監聽埠號（可選）
SMTP_INBOUND_TLS_PORT=1587
# 是否啟用 TLS（生產環境建議啟用）
SMTP_TLS_ENABLED=false
# 是否需要 SMTP 認證
SMTP_AUTH_REQUIRED=false
# 允許的寄件網域（逗號分隔，空白表示允許全部）
# 範例: @ptc-nec.com.tw,@example.com
SMTP_ALLOWED_DOMAINS=
# 最大郵件大小（MB）
SMTP_MAX_MESSAGE_SIZE_MB=25
